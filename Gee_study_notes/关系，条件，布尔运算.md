# Relational, Conditional, and Boolean Operations

ee.Image对象有一组用于构造决策表达式的关系、条件和布尔方法。这些方法的结果有助于通过掩蔽、开发分类地图和值重分配来限制分析到某些像素或区域。

## 布尔和关系型操作符：

### 关系的方法包括:

```python
eq(), gt(), gte(), lt(), and lte()
eq("="), gt(">"),gte(">="), lt("<"), lte("<=")
```

### 布尔方法包括:

```python
And(),Or(), and Not()
```

要在图像之间执行逐像素比较，请使用关系操作符。为了在图像中提取城市化区域，本例使用关系算法对光谱指数进行阈值，将阈值与and算法相结合:

```python
# Load a Landsat 8 image.
image = ee.Image('LANDSAT/LC08/C01/T1_TOA/LC08_044034_20140318')

# Create NDVI and NDWI spectral indices.
ndvi = image.normalizedDifference(['B5', 'B4'])
ndwi = image.normalizedDifference(['B3', 'B5'])

# Create a binary layer using logical operations.
bare = ndvi.lt(0.2).And(ndwi.lt(0))

# Define a map centered on San Francisco Bay.
map_bare = folium.Map(location=[37.7726, -122.3578], zoom_start=12)

# Add the masked image layer to the map and display it.
map_bare.add_ee_layer(bare.selfMask(), None, 'bare')
display(map_bare)
```

如本例所示，关系运算符和布尔运算符的输出要么为true(1)，要么为false(0)。要掩膜0，可以使用selfMask()对结果二进制图像进行掩膜。

![relational_sf](https://developers.google.com/earth-engine/images/Images_relational_sf.png)

低NDVI和低NDWI(白色)来自Landsat 8，旧金山，加利福尼亚，美国。

由关系运算符和布尔运算符返回的二值图像可以与数学运算符一起使用。下面的例子使用关系操作符和add()在夜间灯光图像中创建了城市化区域:

```python
# Load a 2012 nightlights image.
nl_2012 = ee.Image('NOAA/DMSP-OLS/NIGHTTIME_LIGHTS/F182012')
lights = nl_2012.select('stable_lights')

# Define arbitrary thresholds on the 6-bit stable lights band.
zones = lights.gt(30).add(lights.gt(55)).add(lights.gt(62))

# Define a map centered on Paris, France.
map_zones = folium.Map(location=[48.8683, 2.373], zoom_start=8)

# Display the thresholded image as three distinct zones near Paris.
palette = ['000000', '0000FF', '00FF00', 'FF0000']
map_zones.add_ee_layer(
    zones, {'min': 0, 'max': 3, 'palette': palette}, 'development zones')
display(map_zones)
```



## 条件运算符:

注意，前面示例中的代码相当于使用expression()实现的三元操作符:

```python
# Create zones using an expression, display.
zones_exp = nl_2012.expression("(b('stable_lights') > 62) ? 3 "
                               ": (b('stable_lights') > 55) ? 2 "
                               ": (b('stable_lights') > 30) ? 1 "
                               ": 0")

# Define a map centered on Paris, France.
map_zones_exp = folium.Map(location=[48.8683, 2.373], zoom_start=8)

# Add the image layer to the map and display it.
map_zones_exp.add_ee_layer(
    zones_exp, {'min': 0, 'max': 3, 'palette': palette}, 'zones exp')
display(map_zones_exp)
```

![conditional_paris](https://developers.google.com/earth-engine/images/Images_conditional_nightlights_paris.png)

2012年法国巴黎夜灯图像任意区域。

另一种实现图像条件操作的方法是使用where()操作符。考虑用其他数据替换掩码像素的需要。在下面的示例中，使用where()将云像素替换为无云图像中的像素:

```python
# Load a cloudy Landsat 8 image.
image = ee.Image('LANDSAT/LC08/C01/T1_TOA/LC08_044034_20130603')

# Load another image to replace the cloudy pixels.
replacement = ee.Image('LANDSAT/LC08/C01/T1_TOA/LC08_044034_20130416')

# Compute a cloud score band.
cloud = ee.Algorithms.Landsat.simpleCloudScore(image).select('cloud')

# Set cloudy pixels to the other image.
replaced = image.where(cloud.gt(10), replacement)

# Define a map centered on San Francisco Bay.
map_replaced = folium.Map(location=[37.4675, -122.1363], zoom_start=9)

# Add the image layer to the map and display it.
map_replaced.add_ee_layer(replaced,
                   {'bands': ['B5', 'B4', 'B3'], 'min': 0, 'max': 0.5},
                   'clouds replaced')
display(map_replaced)
```

在本例中，观察simpleCloudScore()算法的使用。该算法在0-100的范围内按云量对像素进行排序，其中最多云的有100个。有关simpleCloudScore()的更多信息，请访问陆地卫星算法页面。
