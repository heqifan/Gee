# 要素集的映射

要对FeatureCollection中的每个Feature应用相同的操作，请使用FeatureCollection .map()。例如，要在分水岭FeatureCollection的每个特性中添加另一个area属性，请使用:

```javascript
// ：从数据表中加载流域。
var sheds = ee.FeatureCollection('USGS/WBD/2017/HUC06');

// 该函数计算特性的几何区域，并将其添加为属性。
var addArea = function(feature) {
  return feature.set({areaHa: feature.geometry().area().divide(100 * 100)});
};

//：将区域获取函数映射到FeatureCollection上。
var areaAdded = sheds.map(addArea);

// 使用添加的属性打印集合中的第一个特性。
print('First feature:', areaAdded.first());
```

**在前面的例子中，请注意一个新属性是基于对该特性几何形状的计算而设置的。也可以使用包含现有属性的计算来设置属性。

使用' map() '可以生成一个全新的' FeatureCollection '。下面的例子将分水岭转换为质心:

```javascript
// 这个函数从几何体的质心创建一个新特性。
var getCentroid = function(feature) {
  //保留这个属性列表。
  var keepProperties = ['name', 'huc6', 'tnmid', 'areasqkm'];
  // 获得特征的几何形状的质心。
  var centroid = feature.geometry().centroid();
  // 返回一个新特性，从旧特性中复制属性。
  return ee.Feature(centroid).copyProperties(feature, keepProperties);
};

//将质心获取函数映射到特征上。
var centroids = sheds.map(getCentroid);

// 显示结果
Map.addLayer(centroids, {color: 'FF0000'}, 'centroids');
```

注意，只有属性的子集传播到新集合中的特性。

