# 图像邻域统计

与其指定要执行减速器的区域，还可以指定要应用减速器的邻域。若要减少图像邻域，请使用image. reduceneighhood()。在这种情况下，减少将发生在输入图像上的滑动窗口中，窗口的大小和形状由ee.Kernel指定。reduceneighhood()的输出将是另一幅图像，每个像素值表示输入图像中该像素周围的一个邻域的约简输出。图1说明了这种类型的缩减。

图1所示。演示reduceneighhood()，其中reducer应用于内核。

例如，可以考虑使用国家农业图像计划(NAIP)的图像来量化加州红杉森林砍伐造成的景观差异。具体来说，使用一个邻域的标准差(SD)来表示伐伐区(图2图像的SW)和保护区(图2图像的NE)之间的纹理差异。例如，要获得NAIP归一化植被指数(NDVI)图像的纹理，使用reduceneighhood()计算内核定义的邻居中的SD:

```javascript
// 在红杉林中定义一个区域。
var redwoods = ee.Geometry.Rectangle(-124.0665, 41.0739, -123.934, 41.2029);

// 加载输入NAIP图像并构建蒙版。
var naipCollection = ee.ImageCollection('USDA/NAIP/DOQQ')
  .filterBounds(redwoods)
  .filterDate('2012-01-01', '2012-12-31');
var naip = naipCollection.mosaic();

// 根据NAIP图像计算NDVI。
var naipNDVI = naip.normalizedDifference(['N', 'R']);

// 计算标准偏差(SD)作为NDVI的纹理。
var texture = naipNDVI.reduceNeighborhood({
  reducer: ee.Reducer.stdDev(),
  kernel: ee.Kernel.circle(7),
});

// 显示结果

Map.centerObject(redwoods, 12);
Map.addLayer(naip, {}, 'NAIP input imagery');
Map.addLayer(naipNDVI, {min: -1, max: 1, palette: ['FF0000', '00FF00']}, 'NDVI');
Map.addLayer(texture, {min: 0, max: 0.3}, 'SD of NDVI');
```

任何具有非零核值的像素都包含在计算中。内核权值是默认使用的，不过您可以使用inputWeight参数更改该行为。图2比较了输入图像和reduceneighhood()输出。

![reduceNeighborhood input](https://developers.google.com/earth-engine/images/ReduceNeighborhood_NAIP.png)

北加州海岸的NAIP图像。

![reduceNeighborhood output](https://developers.google.com/earth-engine/images/ReduceNeighborhood_texture.png)

图2 b。使用标准偏差减少器reduceneighhood()输出。