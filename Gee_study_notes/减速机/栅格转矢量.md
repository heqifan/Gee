# 矢量转换

要将Image(光栅)转换为FeatureCollection(矢量)数据类型，请使用Image . reducetovectors()。这是地球引擎中矢量化的主要机制，对于生成输入到其他类型减速器的区域非常有用。reduceToVectors()方法在连接的同构像素组的边界上创建多边形边(也可以是质心或包围盒)。

例如，考虑2012年日本的夜光图像。让夜灯数字作为开发强度的代理。使用夜灯上的任意阈值定义区域，将区域合并成单波段图像，使用reduceToVectors()对区域进行矢量化:

```javascript
// ：从大规模国际边界数据集加载日本边界。
var japan = ee.FeatureCollection('USDOS/LSIB_SIMPLE/2017')
  .filter(ee.Filter.eq('country_na', 'Japan'));

//加载2012年的夜灯图像，剪辑到日本边境。
var nl2012 = ee.Image('NOAA/DMSP-OLS/NIGHTTIME_LIGHTS/F182012')
  .select('stable_lights')
  .clipToCollection(japan);

// 在6位夜灯图像上定义任意阈值。
var zones = nl2012.gt(30).add(nl2012.gt(55)).add(nl2012.gt(62));
zones = zones.updateMask(zones.neq(0));

//将阈值夜灯区域转换为矢量。
var vectors = zones.addBands(nl2012).reduceToVectors({
  geometry: japan,
  crs: nl2012.projection(),
  scale: 1000,
  geometryType: 'polygon',
  eightConnected: false,
  labelProperty: 'zone',
  reducer: ee.Reducer.mean()
});

// 显示的阈值。
Map.setCenter(139.6225, 35.712, 9);
Map.addLayer(zones, {min: 1, max: 3, palette: ['0000FF', '00FF00', 'FF0000']}, 'raster');

// 为矢量制作一个显示图像，将其添加到地图中。
var display = ee.Image(0).updateMask(0).paint(vectors, '000000', 3);
Map.addLayer(display, {palette: '000000'}, 'vectors');
```

